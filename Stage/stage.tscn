[gd_scene load_steps=10 format=3 uid="uid://b3kk540oalq0n"]

[ext_resource type="Script" path="res://Stage/stage.gd" id="1_njkjx"]
[ext_resource type="Resource" uid="uid://c3y0af3ifjr12" path="res://Stage Editor/Made Stages/test.tres" id="2_eut11"]
[ext_resource type="Texture2D" uid="uid://dwn834sk55t0m" path="res://Stage/Stage Assets/sky.png" id="2_xtiaa"]
[ext_resource type="Texture2D" uid="uid://dt0d275iriwr6" path="res://Stage/Stage Assets/foreground1.png" id="3_hbkr7"]
[ext_resource type="Script" path="res://Components/Shootable/shootable_polygon_component.gd" id="4_ipbyu"]
[ext_resource type="Texture2D" uid="uid://copnrqtgrolda" path="res://Stage/Stage Assets/foreground2.png" id="4_swubg"]
[ext_resource type="Script" path="res://Components/Bullet Holes/bullet_hole_sprite_component.gd" id="5_36x5a"]
[ext_resource type="Texture2D" uid="uid://dpyyl3g3v0dy4" path="res://Stage/Stage Assets/foreground3.png" id="5_nxnu7"]

[sub_resource type="Curve2D" id="Curve2D_icwds"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -640, 88, -79.049, 64.3655, 79.049, -64.3655, -512, 56, -53.4873, 23.9589, 53.4873, -23.9589, -368, 8, -53.166, -1.18921, 53.166, 1.18921, -232, -24, -67.3477, -30.3065, 67.3477, 30.3065, -56, -8, -85.3071, -25.8166, 85.3071, 25.8166, 104, 104, -65.57, 0.788736, 65.57, -0.788736, 288, 112, -57.1121, 33.8741, 57.1121, -33.8741, 536, 96, 0, 0, 0, 0, 640, 0)
}
point_count = 9

[node name="Stage" type="Node" node_paths=PackedStringArray("target_lines")]
script = ExtResource("1_njkjx")
stage_layout = ExtResource("2_eut11")
target_lines = [NodePath("SpriteHolder/Foreground1/Path"), null, NodePath("SpriteHolder/Foreground3/Path")]

[node name="RoundTimer" type="Timer" parent="."]
one_shot = true

[node name="TargetSpawnCooldown" type="Timer" parent="."]
one_shot = true

[node name="SpriteHolder" type="Node2D" parent="."]

[node name="Sky" type="Sprite2D" parent="SpriteHolder"]
z_index = -9
position = Vector2(649, 389)
texture = ExtResource("2_xtiaa")
offset = Vector2(-9, -29)

[node name="Foreground1" type="Sprite2D" parent="SpriteHolder"]
z_index = -6
position = Vector2(640, 360)
texture = ExtResource("3_hbkr7")

[node name="ShootablePolygonComponent" type="Node" parent="SpriteHolder/Foreground1" node_paths=PackedStringArray("polygon", "component_owner", "bullet_hole_component")]
script = ExtResource("4_ipbyu")
polygon = NodePath("../Path")
component_owner = NodePath("..")
bullet_hole_component = NodePath("../BulletHoleSpriteComponent")

[node name="BulletHoleSpriteComponent" type="Node" parent="SpriteHolder/Foreground1" node_paths=PackedStringArray("shootable_component", "hole_victim")]
script = ExtResource("5_36x5a")
shootable_component = NodePath("../ShootablePolygonComponent")
hole_victim = NodePath("..")

[node name="Hitbox" type="Line2D" parent="SpriteHolder/Foreground1"]
visible = false
points = PackedVector2Array(-640, -120, -456, -96, -360, -72, -240, -56, -144, -56, -56, -64, 104, -104, 248, -128, 376, -128, 496, -112, 584, -96, 640, -64, 640, 360, -640, 360, -640, -120)
width = 1.0

[node name="Path" type="Line2D" parent="SpriteHolder/Foreground1"]
visible = false
points = PackedVector2Array(-640, -40, -328, 0, 64, -40, 200, -16, 240, 32, 304, 128, 408, 152, 472, 112, 504, 56, 528, 16, 576, -40, 640, -56)
width = 1.0

[node name="Foreground2" type="Sprite2D" parent="SpriteHolder"]
z_index = -3
position = Vector2(640, 360)
texture = ExtResource("4_swubg")

[node name="ShootablePolygonComponent2" type="Node" parent="SpriteHolder/Foreground2" node_paths=PackedStringArray("polygon", "component_owner", "bullet_hole_component")]
script = ExtResource("4_ipbyu")
polygon = NodePath("../Hitbox")
component_owner = NodePath("..")
bullet_hole_component = NodePath("../BulletHoleSpriteComponent")

[node name="BulletHoleSpriteComponent" type="Node" parent="SpriteHolder/Foreground2" node_paths=PackedStringArray("shootable_component", "hole_victim")]
script = ExtResource("5_36x5a")
shootable_component = NodePath("../ShootablePolygonComponent2")
hole_victim = NodePath("..")

[node name="Hitbox" type="Line2D" parent="SpriteHolder/Foreground2"]
visible = false
points = PackedVector2Array(-640, 16, -592, 16, -544, 8, -496, -16, -440, -48, -384, -64, -344, -72, -280, -80, -216, -80, -144, -80, -64, -48, 16, -8, 88, 32, 216, 72, 320, 80, 448, 88, 512, 80, 584, 32, 608, -16, 640, -56, 640, 360, -640, 360, -640, 16)
width = 1.0

[node name="Path2D" type="Path2D" parent="SpriteHolder/Foreground2"]
curve = SubResource("Curve2D_icwds")

[node name="Foreground3" type="Sprite2D" parent="SpriteHolder"]
position = Vector2(640, 360)
texture = ExtResource("5_nxnu7")

[node name="ShootablePolygonComponent" type="Node" parent="SpriteHolder/Foreground3" node_paths=PackedStringArray("polygon", "component_owner", "bullet_hole_component")]
script = ExtResource("4_ipbyu")
polygon = NodePath("../Hitbox")
component_owner = NodePath("..")
bullet_hole_component = NodePath("../BulletHoleSpriteComponent")

[node name="BulletHoleSpriteComponent" type="Node" parent="SpriteHolder/Foreground3" node_paths=PackedStringArray("shootable_component", "hole_victim")]
script = ExtResource("5_36x5a")
shootable_component = NodePath("../ShootablePolygonComponent")
hole_victim = NodePath("..")

[node name="Hitbox" type="Line2D" parent="SpriteHolder/Foreground3"]
visible = false
points = PackedVector2Array(-641, 123, -641, 355, 639, 363, 640, 200, 615, 195, 583, 171, 567, 107, 543, 51, 519, 35, 471, 11, 423, 3, 375, 27, 327, 75, 279, 115, 223, 139, 135, 131, 71, 107, 7, 99, -65, 107, -89, 91, -121, 59, -177, 35, -233, 43, -297, 75, -353, 107, -425, 131, -505, 147, -561, 155, -585, 139, -617, 123, -641, 123)
width = 1.0

[node name="Path" type="Line2D" parent="SpriteHolder/Foreground3"]
visible = false
points = PackedVector2Array(-640, 224, -392, 176, -216, 72, -96, 160, 200, 184, 312, 128, 384, 72, 464, 56, 520, 152, 640, 224)
width = 1.0
