[gd_scene load_steps=8 format=3 uid="uid://b3kk540oalq0n"]

[ext_resource type="Script" path="res://Stage/stage.gd" id="1_njkjx"]
[ext_resource type="Texture2D" uid="uid://dwn834sk55t0m" path="res://Stage/Stage Assets/sky.png" id="2_xtiaa"]
[ext_resource type="Texture2D" uid="uid://dt0d275iriwr6" path="res://Stage/Stage Assets/foreground1.png" id="3_bssag"]
[ext_resource type="Script" path="res://Components/Shootable/shootable_polygon_component.gd" id="4_ipbyu"]
[ext_resource type="Texture2D" uid="uid://copnrqtgrolda" path="res://Stage/Stage Assets/foreground2.png" id="4_swubg"]
[ext_resource type="Script" path="res://Components/Bullet Holes/bullet_hole_sprite_component.gd" id="5_36x5a"]
[ext_resource type="Texture2D" uid="uid://dpyyl3g3v0dy4" path="res://Stage/Stage Assets/foreground3.png" id="5_nxnu7"]

[node name="Stage" type="Node" node_paths=PackedStringArray("streamSpawnPos")]
script = ExtResource("1_njkjx")
streamSpawnPos = [NodePath("Foreground3Spawn"), NodePath("Foreground2Spawn"), NodePath("Foreground1Spawn")]

[node name="NormalTargetTime" type="Timer" parent="."]

[node name="RoundTime" type="Timer" parent="."]

[node name="SpecialTargetTime" type="Timer" parent="."]
one_shot = true
autostart = true

[node name="SpriteHolder" type="Node2D" parent="."]

[node name="Sky" type="Sprite2D" parent="SpriteHolder"]
z_index = -9
y_sort_enabled = true
position = Vector2(649, 389)
texture = ExtResource("2_xtiaa")
offset = Vector2(-9, -29)

[node name="Foreground1" type="Sprite2D" parent="SpriteHolder"]
z_index = -6
y_sort_enabled = true
position = Vector2(649, 389)
texture = ExtResource("3_bssag")
offset = Vector2(-9, -29)

[node name="ShootablePolygonComponent" type="Node2D" parent="SpriteHolder/Foreground1" node_paths=PackedStringArray("polygon", "componentOwner", "bulletHoleComponent")]
script = ExtResource("4_ipbyu")
polygon = NodePath("../Hitbox")
componentOwner = NodePath("..")
bulletHoleComponent = NodePath("../BulletHoleSpriteComponent")

[node name="BulletHoleSpriteComponent" type="Node" parent="SpriteHolder/Foreground1" node_paths=PackedStringArray("shootableComponent", "holeVictim")]
script = ExtResource("5_36x5a")
shootableComponent = NodePath("../ShootablePolygonComponent")
holeVictim = NodePath("..")

[node name="Hitbox" type="Line2D" parent="SpriteHolder/Foreground1"]
visible = false
points = PackedVector2Array(-649, -149, -545, -141, -457, -125, -377, -101, -257, -85, -161, -85, -97, -85, 39, -117, 183, -149, 295, -157, 399, -149, 495, -141, 567, -125, 631, -93, 631, 331, -649, 331, -649, -149)

[node name="Foreground2" type="Sprite2D" parent="SpriteHolder"]
z_index = -3
y_sort_enabled = true
position = Vector2(649, 389)
texture = ExtResource("4_swubg")
offset = Vector2(-9, -29)

[node name="ShootablePolygonComponent" type="Node2D" parent="SpriteHolder/Foreground2" node_paths=PackedStringArray("polygon", "componentOwner", "bulletHoleComponent")]
script = ExtResource("4_ipbyu")
polygon = NodePath("../Hitbox")
componentOwner = NodePath("..")
bulletHoleComponent = NodePath("../BulletHoleSpriteComponent")

[node name="BulletHoleSpriteComponent" type="Node" parent="SpriteHolder/Foreground2" node_paths=PackedStringArray("shootableComponent", "holeVictim")]
script = ExtResource("5_36x5a")
shootableComponent = NodePath("../ShootablePolygonComponent")
holeVictim = NodePath("..")

[node name="Hitbox" type="Line2D" parent="SpriteHolder/Foreground2"]
visible = false
points = PackedVector2Array(-649, -13, -593, -5, -529, -37, -473, -61, -409, -93, -321, -109, -257, -109, -193, -109, -113, -93, -41, -53, 71, 3, 183, 35, 279, 51, 375, 59, 447, 59, 495, 51, 551, 27, 591, -29, 631, -77, 631, 331, -649, 331, -649, -13)

[node name="Foreground3" type="Sprite2D" parent="SpriteHolder"]
y_sort_enabled = true
position = Vector2(649, 389)
texture = ExtResource("5_nxnu7")
offset = Vector2(-9, -29)

[node name="ShootablePolygonComponent" type="Node2D" parent="SpriteHolder/Foreground3" node_paths=PackedStringArray("polygon", "componentOwner", "bulletHoleComponent")]
script = ExtResource("4_ipbyu")
polygon = NodePath("../Hitbox")
componentOwner = NodePath("..")
bulletHoleComponent = NodePath("../BulletHoleSpriteComponent")

[node name="BulletHoleSpriteComponent" type="Node" parent="SpriteHolder/Foreground3" node_paths=PackedStringArray("shootableComponent", "holeVictim")]
script = ExtResource("5_36x5a")
shootableComponent = NodePath("../ShootablePolygonComponent")
holeVictim = NodePath("..")

[node name="Hitbox" type="Line2D" parent="SpriteHolder/Foreground3"]
visible = false
points = PackedVector2Array(-649, 99, -649, 331, 631, 331, 631, 163, 575, 147, 567, 99, 543, 43, 503, -5, 439, -21, 415, -21, 359, 3, 303, 59, 239, 107, 111, 99, 47, 75, -33, 75, -81, 83, -121, 43, -169, 11, -241, 11, -329, 59, -425, 99, -489, 115, -537, 123, -569, 131, -601, 107, -633, 91, -649, 99)

[node name="Foreground1Spawn" type="Marker2D" parent="."]
position = Vector2(0, 328)

[node name="Foreground2Spawn" type="Marker2D" parent="."]
position = Vector2(1280, 448)

[node name="Foreground3Spawn" type="Marker2D" parent="."]
position = Vector2(0, 528)
